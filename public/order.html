<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Place an order</title>
    <style>

        * {
            font-family: "JetBrains Mono", sans-serif;
        }

        body {
            background-color: #0d1115;
        }

        .details-container {
            display: flex;
            justify-content: center;
            align-items: center;
            /* Adjust this value as needed */
            min-height: 100vh;
            z-index: 1;
        }

        .details-container form {
            margin-right: 512px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        input[type="text"] {
            color: #fff;
            width: 300px;
            height: 50px;
            background-color: transparent;
            border: none;
            border-bottom: 1px solid #00cc66;
        }

        input[type="text"]:focus {
            outline: none;
        }

        .contact-information {
            user-select: none;
            position: absolute;
            top: 10px;
            right: 158px;
            text-align: right;
            margin: 0;
        }

        .city {
            color: white;
        }

        .contact-information p {
            margin: 16px;
            font-size: 16px;
        }

        .order-content {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            gap: 40px;
            position: relative;
            z-index: 1;
        }

        #selected-flowers {
            display: grid;
            position: absolute;
            margin-left: 512px;
            margin-top: 128px;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 20px;
            justify-items: center;
            align-items: start;
            min-width: 260px;
            max-width: 400px;
        }

        #selected-flowers .flower-card {
            background: #222;
            padding: 10px;
            border-radius: 8px;
            color: #fff;
            text-align: center;
        }

        .center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            margin: 0;
            color: #fff;
            font-size: 35px;
            font-weight: bold;
            user-select: none;
        }

        .cart {
            position: fixed;
            bottom: 70px;
            right: 70px;
            z-index: 1000;
            cursor: pointer;
        }

        .cart button {
            position: relative;
            background-color: #00cc66; /* Button color */
            color: #fff;
            cursor: pointer;
            border: none;
            width: 100px;
            height: 100px;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.2em;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transition: background-color 0.3s, transform 0.3s;
        }

        .social-icons {
            user-select: none;
            position: absolute;
            top: 40px;
            right: 59px;
            display: flex;
            gap: 10px;
        }

        .flower-1 {
            position: absolute;
            top: 0;
            left: 0;
            margin-bottom: 200px;
            user-select: none;
        }

        .phone {
            color: #00cc66;
            font-weight: bold;
        }

        .logo {
            color: #fff; /* White text */
            border-radius: 8px;
            font-weight: bold;
            font-size: 10px;
            max-width: 300px;
            user-select: none;
        }

        .logo a {
            display: inline-block;;
            margin-top: 35px;
            margin-left: 35px;
            text-decoration: none;
            color: #fff; /* White text */
            font-size: 32px;
            font-weight: bold;
            text-transform: uppercase;
        }

        html, body {
            margin: 0;
            padding: 0;
        }

        header {
            position: fixed;
            z-index: 1000;
        }

        .header-container {
            position: relative;
            width: 100vw;
            height: 105px;
            background-color: rgba(21, 28, 34, 0.8);
            backdrop-filter: blur(10px);
        }

    </style>
</head>
<body>
<header>
    <div class="header-container">
        <div class="logo">
            <a href="/index.html">Lover Flower</a>
        </div>
        <div class="center">
            <p>Place an order</p>
        </div>
        <div class="contact-information">
            <p class="city" >Tashkent</p>
            <p class="phone">+998 (96) 983-47-19</p>
        </div>
        <div class="social-icons">
            <img src="figmaResources/whatsup.png" height="25" width="25" draggable="false"/>
            <img src="figmaResources/phone.png" height="25" width="25" draggable="false"/>
            <img src="figmaResources/instagram.png" height="25" width="25" draggable="false"/>
        </div>
    </div>
</header>


<img src="figmaResources/image%20147.svg" class="flower-1">

<!-- Inside <body> -->
<div class="order-content">
    <div class="details-container">
        <form>
            <input type="text" placeholder="Name*" required>
            <input type="text" placeholder="Phone number*" required>
            <input type="text" placeholder="Email" >
            <input type="text" placeholder="Address*" required>
        </form>
    </div>
    <div id="selected-flowers"></div>
</div>

<div class="cart">
    <button>
        BUY
    </button>
</div>


<script>
    // Example flower data (should match your catalog)
    const flowers = [
        { id: "1", name: "Lily of the valley", img: "https://i.pinimg.com/736x/34/5b/8c/345b8c7a8e795fcb45f5873e6d32481f.jpg" },
        { id: "2", name: "Dahila", img: "https://i.pinimg.com/736x/d4/e3/c8/d4e3c807d94cf6eba918852ee8316bd9.jpg" },
        { id: "3", name: "Zinnia", img: "https://i.pinimg.com/736x/89/a0/ad/89a0ad1b5efe27617eae3d78c7b93bc6.jpg" },
        { id: "4", name: "Poppy", img: "https://i.pinimg.com/736x/d9/ed/ed/d9eded63a73ddd9357c56fc814be1b7b.jpg" },
        { id: "4", name: "African Daisy", img: "https://i.pinimg.com/736x/d9/7b/44/d97b44d095fc62e9dd75122d9bd1e578.jpg" },
        { id: "5", name: "Azalea", img: "https://i.pinimg.com/736x/67/4a/11/674a11be9290c73cc7d40966464c3868.jpg" },
        { id: "6", name: "Chrysanthemum", img: "https://i.pinimg.com/736x/a5/ad/d4/a5add4bd788ca19c661d234171c28728.jpg" },
        { id: "7", name: "Blossom", img: "https://i.pinimg.com/736x/ba/a6/65/baa6655f5612419086dde58413200707.jpg" },
        { id: "8", name: "Daffodil", img: "https://i.pinimg.com/736x/5f/b5/91/5fb591027bf420d1c71f20f50201a1a2.jpg" },
        { id: "9", name: "Amaryllis", img: "https://i.pinimg.com/736x/b5/c7/db/b5c7dbdaae658afda3e3215281d8b324.jpg" },
        { id: "10", name: "Aster", img: "https://i.pinimg.com/736x/da/86/a0/da86a0044a66f02b342bd66db123f216.jpg" },
        { id: "11", name: "Begonia", img: "https://i.pinimg.com/736x/0f/50/7c/0f507ca23864a0572670c21e0fcaf171.jpg" },
        { id: "12", name: "Calla", img: "https://i.pinimg.com/736x/f3/29/62/f329627b74900d7a50eaf44d54b94bf9.jpg" },
        { id: "13", name: "Carnation", img: "https://i.pinimg.com/736x/e5/63/aa/e563aad39f6bc8a0ae060cb47c4ed597.jpg" },
        { id: "14", name: "Delphinium", img: "https://i.pinimg.com/736x/1b/c9/a8/1bc9a805340af53fa9f057a88d4b549a.jpg" }
    ];

    document.querySelector('.cart button').addEventListener('click', async function(event) {
        event.preventDefault();

        const form = document.querySelector('.details-container form');
        const inputs = form.querySelectorAll('input[required]');
        let allFilled = true;
        inputs.forEach(input => {
            if (!input.value.trim()) {
                allFilled = false;
                input.style.borderBottom = '2px solid red';
            } else {
                input.style.borderBottom = '1px solid #00cc66';
            }
        });
        if (!allFilled) {
            alert('Please fill in all required fields.');
            return false;
        }

        // Collect form data
        const name = form.querySelector('input[placeholder="Name*"]').value.trim();
        const phone = form.querySelector('input[placeholder="Phone number*"]').value.trim();
        const email = form.querySelector('input[placeholder="Email"]').value.trim();
        const address = form.querySelector('input[placeholder="Address*"]').value.trim();

        // Get selected flower IDs from localStorage
        const selectedFlowerIds = JSON.parse(localStorage.getItem('selectedFlowerIds') || '[]');

        // Prepare data object (cart as string)
        const data = {
            name: name,
            phone: phone,
            email: email,
            address: address,
            cart: JSON.stringify(selectedFlowerIds)
        };

        // Send POST request
        try {
            const response = await fetch('http://localhost:8080/user', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            });
            if (response.ok) {
                alert('Order submitted successfully!');
                // Optionally clear form and cart here
            } else {
                alert('Failed to submit order.');
            }
        } catch (error) {
            alert('Error submitting order.');
        }
    });

    // Replace renderSelectedFlowers with this:
    function renderSelectedFlowers() {
        const selectedIds = JSON.parse(localStorage.getItem('selectedFlowerIds') || '[]');
        const container = document.getElementById('selected-flowers');
        container.innerHTML = '';
        flowers.filter(f => selectedIds.includes(f.id)).forEach(flower => {
            const card = document.createElement('div');
            card.className = 'flower-card';
            card.innerHTML = `
            <img src="${flower.img}" alt="${flower.name}" width="100" height="100" style="border-radius:8px;"><br>
            <span>${flower.name}</span>
        `;
            container.appendChild(card);
        });
    }

    document.addEventListener('DOMContentLoaded', renderSelectedFlowers);
</script>
</body>
</html>